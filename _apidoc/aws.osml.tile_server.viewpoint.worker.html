

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>aws.osml.tile_server.viewpoint.worker module &mdash; OversightML Tile Server  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OversightML Tile Server
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OversightML Tile Server</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">aws.osml.tile_server.viewpoint.worker module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_apidoc/aws.osml.tile_server.viewpoint.worker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-aws.osml.tile_server.viewpoint.worker">
<span id="aws-osml-tile-server-viewpoint-worker-module"></span><h1>aws.osml.tile_server.viewpoint.worker module<a class="headerlink" href="#module-aws.osml.tile_server.viewpoint.worker" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.SupplementaryFileType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aws.osml.tile_server.viewpoint.worker.</span></span><span class="sig-name descname"><span class="pre">SupplementaryFileType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#SupplementaryFileType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.SupplementaryFileType" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="aws.osml.tile_server.utils.string_enums.html#aws.osml.tile_server.utils.string_enums.AutoLowerStringEnum" title="aws.osml.tile_server.utils.string_enums.AutoLowerStringEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoLowerStringEnum</span></code></a></p>
<p>Provides supplementary file types to download from S3.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AUX</strong> – Aux file.</p></li>
<li><p><strong>OVERVIEW</strong> – Overview file.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.SupplementaryFileType.AUX">
<span class="sig-name descname"><span class="pre">AUX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'aux'</span></em><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.SupplementaryFileType.AUX" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.SupplementaryFileType.OVERVIEW">
<span class="sig-name descname"><span class="pre">OVERVIEW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'overview'</span></em><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.SupplementaryFileType.OVERVIEW" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aws.osml.tile_server.viewpoint.worker.</span></span><span class="sig-name descname"><span class="pre">ViewpointWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aws_sqs:</span> <span class="pre">~boto3.resources.base.ServiceResource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_s3:</span> <span class="pre">~boto3.resources.base.ServiceResource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_ddb:</span> <span class="pre">~boto3.resources.base.ServiceResource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger:</span> <span class="pre">~logging.Logger</span> <span class="pre">=</span> <span class="pre">&lt;Logger</span> <span class="pre">aws.osml.tile_server.viewpoint.worker</span> <span class="pre">(WARNING)&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Thread" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Ellipsis</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.join" title="Link to this definition"></a></dt>
<dd><p>Join the ViewpointWorker threads together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – The maximum number of seconds to wait for the thread to finish execution. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the method
will block until the thread is finished. (Default is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.run" title="Link to this definition"></a></dt>
<dd><p>Monitors SQS queues for ViewpointRequest and be able to process it. First, it will
pick up a message from ViewpointRequest SQS. Then, it will download an image from S3
and save it to the local temp directory. Once that’s completed, it will update the DynamoDB
to reflect that this Viewpoint is READY to review. This function will run in the background.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.download_image">
<span class="sig-name descname"><span class="pre">download_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">viewpoint_item</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="aws.osml.tile_server.models.html#aws.osml.tile_server.models.ViewpointModel" title="aws.osml.tile_server.models.ViewpointModel"><span class="pre">ViewpointModel</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.download_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.download_image" title="Link to this definition"></a></dt>
<dd><p>This method downloads an image file from an S3 bucket using the bucket_name and object_key attributes of a
ViewpointModel instance. The downloaded image is saved under specific server configuration, and its path is
stored. The method also attempts to download optional files, logging their unavailability. Note: The method
assumes the existence of the following constants: OVERVIEW_FILE_EXTENSION and AUXXML_FILE_EXTENSION,
which represent the file extensions for the optional overview and aux files respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>viewpoint_item</strong> – Instance of ViewpointModel representing the viewpoint item to be downloaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.create_tile_pyramid">
<span class="sig-name descname"><span class="pre">create_tile_pyramid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">viewpoint_item</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="aws.osml.tile_server.models.html#aws.osml.tile_server.models.ViewpointModel" title="aws.osml.tile_server.models.ViewpointModel"><span class="pre">ViewpointModel</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.create_tile_pyramid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.create_tile_pyramid" title="Link to this definition"></a></dt>
<dd><p>Main tile pyramid creation function. It creates a tile pyramid for a specific viewpoint item
by considering its range adjustment and local object path.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>The viewpoint item object for which to create the tile pyramid.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.extract_metadata">
<span class="sig-name descname"><span class="pre">extract_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">viewpoint_item</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="aws.osml.tile_server.models.html#aws.osml.tile_server.models.ViewpointModel" title="aws.osml.tile_server.models.ViewpointModel"><span class="pre">ViewpointModel</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.extract_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.extract_metadata" title="Link to this definition"></a></dt>
<dd><p>Extracts the metadata from an image and creates various JSON files for the metadata, bounds, info, etc. so
that they can be easily returned by the web API without need to reparse the information from the image itself.
This reduces the pressure on the tile factory resource pool making those resources more available for
operations that need to return pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>the description of the viewpoint item</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aws.osml.tile_server.viewpoint.worker.ViewpointWorker.get_default_tile_factory_pool_for_viewpoint">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_default_tile_factory_pool_for_viewpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">viewpoint_item</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="aws.osml.tile_server.models.html#aws.osml.tile_server.models.ViewpointModel" title="aws.osml.tile_server.models.ViewpointModel"><span class="pre">ViewpointModel</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="aws.osml.tile_server.utils.tile_server_utils.html#aws.osml.tile_server.utils.tile_server_utils.TileFactoryPool" title="aws.osml.tile_server.utils.tile_server_utils.TileFactoryPool"><span class="pre">TileFactoryPool</span></a></span></span><a class="reference internal" href="../_modules/aws/osml/tile_server/viewpoint/worker.html#ViewpointWorker.get_default_tile_factory_pool_for_viewpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#aws.osml.tile_server.viewpoint.worker.ViewpointWorker.get_default_tile_factory_pool_for_viewpoint" title="Link to this definition"></a></dt>
<dd><p>Helper method that creates a default tile factory pool for the image. This resource pool will not necessarily
be sufficient to build all tiles, but it is sufficient to build previews and handle metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>viewpoint_item</strong> – the description of the viewpoint item</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a default tile factory pool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Amazon.com.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<style>
    .wy-nav-content { max-width: none; }
</style>



</body>
</html>