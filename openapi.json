{"openapi":"3.1.0","info":{"title":"OSML Tile Server","version":"1.0"},"servers":[{"url":"/latest"}],"paths":{"/viewpoints/":{"get":{"tags":["viewpoints"],"summary":"List Viewpoints","description":"Get a list of viewpoints in the database.\n\n:param max_results: Optional max number of viewpoints requested\n\n:param next_token: Optional token to begin a query from provided by the previous query response.\n\n:return: List of viewpoints with details from the table.","operationId":"list_viewpoints_viewpoints__get","parameters":[{"name":"max_results","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Results"}},{"name":"next_token","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointListResponse"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["viewpoints"],"summary":"Create Viewpoint","description":"Create a viewpoint item, then copy the imagery file from S3 to EFS, then create an item into the database.\n\n:param viewpoint_request: client's request which contains name, file source, and range type.\n\n:return: Status associated with the request to create the viewpoint in the table.","operationId":"create_viewpoint_viewpoints__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Create Viewpoint Viewpoints  Post"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["viewpoints"],"summary":"Update Viewpoint","description":"Update the viewpoint item in DynamoDB based on the given viewpoint_id.\n\n:param viewpoint_request: Client's request, which contains name, file source, and range type.\n\n:return: Updated viewpoint item details from the table.","operationId":"update_viewpoint_viewpoints__put","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointUpdate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointModel"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}":{"delete":{"tags":["viewpoints"],"summary":"Delete Viewpoint","description":"Remove the file from the EFS and update the database to indicate that it has been deleted.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return ViewpointModel: Updated viewpoint item details from the table.","operationId":"delete_viewpoint_viewpoints__viewpoint_id__delete","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointModel"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["viewpoints"],"summary":"Describe Viewpoint","description":"Get viewpoint details based on provided viewpoint id.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return: Details from the viewpoint item in the table.","operationId":"describe_viewpoint_viewpoints__viewpoint_id__get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewpointModel"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/metadata":{"get":{"tags":["viewpoints"],"summary":"Get Metadata","description":"Get viewpoint metadata based on provided viewpoint id.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return: Viewpoint metadata associated with the viewpoint item from the table.","operationId":"get_metadata_viewpoints__viewpoint_id__metadata_get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Metadata Viewpoints  Viewpoint Id  Metadata Get"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/bounds":{"get":{"tags":["viewpoints"],"summary":"Get Bounds","description":"Get viewpoint bounds based on provided viewpoint id.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return: Viewpoint bounds for the given table item.","operationId":"get_bounds_viewpoints__viewpoint_id__bounds_get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Bounds Viewpoints  Viewpoint Id  Bounds Get"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/info":{"get":{"tags":["viewpoints"],"summary":"Get Info","description":"Get viewpoint info based on provided viewpoint id.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return: Viewpoint info associated with the given id.","operationId":"get_info_viewpoints__viewpoint_id__info_get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Info Viewpoints  Viewpoint Id  Info Get"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/statistics":{"get":{"tags":["viewpoints"],"summary":"Get Statistics","description":"Get viewpoint statistics based on provided viewpoint id.\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:return: Viewpoint statistics associated with the id.","operationId":"get_statistics_viewpoints__viewpoint_id__statistics_get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Statistics Viewpoints  Viewpoint Id  Statistics Get"}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/preview.{img_format}":{"get":{"tags":["viewpoints"],"summary":"Get Preview","description":"Get preview of viewpoint in the requested format\n\n:param viewpoint_id: Unique viewpoint id to get from the table.\n\n:param img_format: The Desired format for preview output, valid options are defined by GDALImageFormats.\n\n:param max_size: Max size of the preview image, defaults to 1024 pixels.\n\n:param width: Preview width in pixels that supersedes scale if > 0.\n\n:param height: Preview height in pixels that supersedes scale if > 0.\n\n:param compression: GDAL image compression format to use.\n\n:return: StreamingResponse of preview binary with the appropriate mime type based on the img_format","operationId":"get_preview_viewpoints__viewpoint_id__preview__img_format__get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}},{"name":"img_format","in":"path","required":true,"schema":{"$ref":"#/components/schemas/GDALImageFormats"}},{"name":"max_size","in":"query","required":false,"schema":{"type":"integer","default":1024,"title":"Max Size"}},{"name":"width","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Width"}},{"name":"height","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Height"}},{"name":"compression","in":"query","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/GDALCompressionOptions"}],"description":"Compression Algorithm for image.","default":"NONE","title":"Compression"},"description":"Compression Algorithm for image."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/tiles/{z}/{x}/{y}.{tile_format}":{"get":{"tags":["viewpoints"],"summary":"Get Tile","description":":param viewpoint_id: Unique viewpoint id to get from the table.\n\n:param z: Resolution-level in the image pyramid 0 = full resolution, 1 = full/2, 2 = full/4, ...\n\n:param x: Tile row location in pixels for the given tile.\n\n:param y: Tile column location in pixels for the given tile.\n\n:param tile_format: Desired format for tile output, valid options are defined by GDALImageFormats.\n\n:param compression: GDAL tile compression format.\n\n:return: StreamingResponse of tile image binary payload.","operationId":"get_tile_viewpoints__viewpoint_id__tiles__z___x___y___tile_format__get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}},{"name":"z","in":"path","required":true,"schema":{"type":"integer","title":"Z"}},{"name":"x","in":"path","required":true,"schema":{"type":"integer","title":"X"}},{"name":"y","in":"path","required":true,"schema":{"type":"integer","title":"Y"}},{"name":"tile_format","in":"path","required":true,"schema":{"$ref":"#/components/schemas/GDALImageFormats"}},{"name":"compression","in":"query","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/GDALCompressionOptions"}],"description":"Compression Algorithm for image.","default":"NONE","title":"Compression"},"description":"Compression Algorithm for image."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewpoints/{viewpoint_id}/crop/{min_x},{min_y},{max_x},{max_y}.{img_format}":{"get":{"tags":["viewpoints"],"summary":"Get Crop","description":"Crop a portion of the viewpoint.\n\n:param viewpoint_id: Unique viewpoint id to get from the table as a crop.\n\n:param min_x: The left pixel coordinate of the desired crop.\n\n:param min_y: The upper pixel coordinate of the desired crop.\n\n:param max_x: The right pixel coordinate of the desired crop.\n\n:param max_y: The lower pixel coordinate of the pixel crop.\n\n:param img_format: Desired format for cropped output. Valid options are defined by GDALImageFormats.\n\n:param compression: GDAL compression algorithm for image.\n\n:param width: Optional width in px of the desired crop, if provided, max_x will be ignored.\n\n:param height: Optional height in px of the desired crop, if provided, max_y will be ignored.\n\n:return: StreamingResponse of cropped image binary with the appropriate mime type based on the img_format","operationId":"get_crop_viewpoints__viewpoint_id__crop__min_x___min_y___max_x___max_y___img_format__get","parameters":[{"name":"viewpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Viewpoint Id"}},{"name":"min_x","in":"path","required":true,"schema":{"type":"integer","title":"Min X"}},{"name":"min_y","in":"path","required":true,"schema":{"type":"integer","title":"Min Y"}},{"name":"max_x","in":"path","required":true,"schema":{"type":"integer","title":"Max X"}},{"name":"max_y","in":"path","required":true,"schema":{"type":"integer","title":"Max Y"}},{"name":"img_format","in":"path","required":true,"schema":{"$ref":"#/components/schemas/GDALImageFormats"}},{"name":"compression","in":"query","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/GDALCompressionOptions"}],"description":"GDAL compression algorithm for image.","default":"NONE","title":"Compression"},"description":"GDAL compression algorithm for image."},{"name":"width","in":"query","required":false,"schema":{"type":"integer","description":"Optional. Width in px of the desired crop.  If provided, max_x will be ignored.","title":"Width"},"description":"Optional. Width in px of the desired crop.  If provided, max_x will be ignored."},{"name":"height","in":"query","required":false,"schema":{"type":"integer","description":"Optional. Height in px of the desired crop.  If provided, max_y will be ignored.","title":"Height"},"description":"Optional. Height in px of the desired crop.  If provided, max_y will be ignored."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found!"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"GDALCompressionOptions":{"type":"string","enum":["NONE","JPEG","J2K","LZW"],"title":"GDALCompressionOptions","description":"Enumeration defining compression algorithms for image."},"GDALImageFormats":{"type":"string","enum":["NITF","JPEG","PNG","GTiff"],"title":"GDALImageFormats","description":"Subset of GDAL supported image formats commonly used by this software. See\nhttps://gdal.org/drivers/raster/index.html for a complete listing of the formats."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RangeAdjustmentType-Output":{"type":"string","enum":["NONE","MINMAX","DRA"],"title":"RangeAdjustmentType","description":"Enumeration defining ways to scale raw image pixels to an output value range.\n\n- NONE indicates that the full range available to the input type will be used.\n- MINMAX chooses the portion of the input range that actually contains values.\n- DRA is a dynamic range adjustment that attempts to select the most important portion of the input range.\n  It differs from MINMAX in that it can exclude outliers to reduce the impact of unusually bright/dark\n  spots in an image."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ViewpointListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ViewpointModel"},"type":"array","title":"Items"},"next_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Token"}},"type":"object","required":["items"],"title":"ViewpointListResponse","description":"Represents the return structure of a request for viewpoints"},"ViewpointModel":{"properties":{"viewpoint_id":{"type":"string","title":"Viewpoint Id"},"viewpoint_name":{"type":"string","title":"Viewpoint Name"},"viewpoint_status":{"$ref":"#/components/schemas/ViewpointStatus"},"bucket_name":{"type":"string","title":"Bucket Name"},"object_key":{"type":"string","title":"Object Key"},"tile_size":{"type":"integer","title":"Tile Size"},"range_adjustment":{"$ref":"#/components/schemas/RangeAdjustmentType-Output"},"local_object_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Local Object Path"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"expire_time":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Expire Time"}},"type":"object","required":["viewpoint_id","viewpoint_name","viewpoint_status","bucket_name","object_key","tile_size","range_adjustment","local_object_path","error_message","expire_time"],"title":"ViewpointModel","description":"Represents the model data for a viewpoint, including its ID, name, status, bucket name, object key, tile size,\nrange adjustment, local object path, and error message.\n\n:param viewpoint_id: The ID to associate with the viewpoint.\n:param viewpoint_name: The name of the viewpoint.\n:param viewpoint_status: The status of the viewpoint.\n:param bucket_name: The name of the bucket the images are located in.\n:param object_key: The object is key to associate with the viewpoint.\n:param tile_size: The tile size to use for the viewpoint model.\n:param range_adjustment: The type of range adjustment.\n:param local_object_path: Optional local path of the object.\n:param error_message: Optional error messages to include.\n:param expire_time: Optional expiration time for the message."},"ViewpointRequest":{"properties":{"viewpoint_name":{"type":"string","minLength":1,"title":"Viewpoint Name"},"bucket_name":{"type":"string","minLength":1,"title":"Bucket Name"},"object_key":{"type":"string","minLength":1,"title":"Object Key"},"tile_size":{"type":"integer","exclusiveMinimum":0.0,"title":"Tile Size"},"range_adjustment":{"allOf":[{"$ref":"#/components/schemas/aws__osml__gdal__typing__RangeAdjustmentType__1"}],"minLength":1}},"type":"object","required":["viewpoint_name","bucket_name","object_key","tile_size","range_adjustment"],"title":"ViewpointRequest","description":"Represents a request to create or update a viewpoint.\n\nAll fields are required.\n\n:param bucket_name: The name of the bucket, the Minimum length is 1.\n:param object_key: The key of the object, the Minimum length is 1.\n:param viewpoint_name: The name of the viewpoint, the Minimum length is 1.\n:param tile_size: The tile size, it Should be greater than 0.\n:param range_adjustment: The range adjustment type, the Minimum string length is 1."},"ViewpointStatus":{"type":"string","enum":["NOT FOUND","REQUESTED","UPDATING","READY","DELETED","FAILED"],"title":"ViewpointStatus","description":"Provides status options for a viewpoint.\n\nThese states represent the state of processing or readiness for a viewpoint.\n\n:cvar NOT_FOUND: Viewpoint isn't found.\n:cvar REQUESTED: Viewpoint requested.\n:cvar UPDATING: Viewpoint updating.\n:cvar READY: Viewpoint ready.\n:cvar DELETED: Viewpoint deleted.\n:cvar FAILED: Viewpoint failed."},"ViewpointUpdate":{"properties":{"viewpoint_id":{"type":"string","title":"Viewpoint Id"},"viewpoint_name":{"type":"string","title":"Viewpoint Name"},"tile_size":{"type":"integer","title":"Tile Size"},"range_adjustment":{"$ref":"#/components/schemas/aws__osml__gdal__typing__RangeAdjustmentType__1"}},"type":"object","required":["viewpoint_id","viewpoint_name","tile_size","range_adjustment"],"title":"ViewpointUpdate","description":"Represents an update operation for a viewpoint.\n\nThis includes fields to update the viewpoint's ID, name, tile size, and range adjustment.\n\n:param viewpoint_id: The ID of the viewpoint.\n:param viewpoint_name: The name of the viewpoint.\n:param tile_size: The tile size.\n:param range_adjustment: The type of range adjustment."},"aws__osml__gdal__typing__RangeAdjustmentType__1":{"type":"string","enum":["NONE","MINMAX","DRA"],"title":"RangeAdjustmentType","description":"Enumeration defining ways to scale raw image pixels to an output value range.\n\n- NONE indicates that the full range available to the input type will be used.\n- MINMAX chooses the portion of the input range that actually contains values.\n- DRA is a dynamic range adjustment that attempts to select the most important portion of the input range.\n  It differs from MINMAX in that it can exclude outliers to reduce the impact of unusually bright/dark\n  spots in an image."},"aws__osml__gdal__typing__RangeAdjustmentType__2":{"$ref":"#/components/schemas/aws__osml__gdal__typing__RangeAdjustmentType__1","minLength":1}}}}